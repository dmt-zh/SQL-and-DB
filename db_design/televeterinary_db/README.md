## Техническое задание по проектированию БД


Спроектируй верхнеуровнево базу данных для системы телеветеринарии.
Система позволяет пользователям (клиентам компании) коммуницировать с профессиональными ветеринарами (сотрудниками компании телеветеринарии). Коммуникация происходит в чате. Отвечать клиенту могут разные ветеринары в разное время, но для клиента это один общий чат. Пользователь заходит в систему (в личный кабинет на сайте или в мобильное приложение) и видит перед собой единый чат, в который может писать любые вопросы по любым своим питомцам. В чате можно кидать файлы картинок и видео помимо текстовых сообщений.

Система работает по подписочной модели — клиент покупает один из тарифов подписки и получает возможность общаться с ветеринарами. Сотрудники компании могут менять тарифы — цены, услуги, добавлять и удалять тарифы. Оплата происходит через интернет-эквайринг (картой на сайте или в мобильном приложении). Действует система промокодов, которые дают скидки или даже бесплатный доступ к каким-то тарифам.
Клиенты могут приходить в компанию по разным каналам — регистрироваться на сайте или в мобильном приложении, а также через партнёров. Система должна трекать (отслеживать) откуда какой клиент пришел, это важное знание для бизнеса. Однако в большинстве сценариев использования данных о пользователях это знание не нужно, оно нужно только для бизнес-аналитики.

Питомцев (животных) надо тоже сохранять, конечно. Для удовольствия клиентов и чтобы ветеринары это могли смотреть, а в будущем чтобы на каких-то животных можно было звать отдельных ветеринаров, специализирующихся на них.

Перечисли таблицы с названиями по-русски и опиши все взаимосвязи таблиц (один ко многим, один к одному, многие ко многим).

Для таблицы или таблиц, которые хранят сообщения чата, опиши все их поля и FK (внешние ключи). Бизнесу надо иметь возможность по каждому сообщению выводить имя отправителя и его аватарку. Также надо иметь по каждому сообщению получателя и отправителя, конечно.

О чём надо думать в этом задании? О таблицах и их взаимосвязях. О полях внутри таблиц думать здесь пока не надо (кроме хранения сообщений).

Формат ответа такой:
```
Таблицы:
- таблица 1
- таблица 2
- таблица 3
- ...

Связи:
- таблица 1 - таблица 2: один ко многим
- таблица 1 - таблица 3: один к одному
- ...
```

Если таблицы связаны, то не добавляй связь более одного раза. В примере выше таблица 1 и таблица 2 связаны один ко многим и я это показал, но не стал показывать связь таблицы 2 и таблицы 1 как многие к одному. Это лишняя информация.

Критерии приёмки задания:
- формат ответа соответствует требуемому;
- все данные, нужные разрабатываемой системе, хранятся в БД. Никакая сущность не упущена;
- связи сущностей/таблиц БД логически корректны и соответствуют задаче;
- никакая связь не упущена;
- связи отражают в том числе сценарии использования данных.
<br>

## Проект базы данных

<img src="https://github.com/dmt-zh/SQL-and-DB/blob/main/televeterinary_db/televeterinary-project.jpg"/>

**Таблицы**:
- `user` — базовая таблица со всеми пользователями
- `client` — таблица с клиентами
- `veterinarian` — таблица с ветеринарами
- `message` — таблица с сообщениями
    - `text` — текс сообщения
    - `from_user_id` — FK (ссылка на PK из таблицы`user`) поле для записи идентификатора пользователя отправившего сообщение
    - `to_user_id` — поле для записи идентификатора пользователя получившего сообщение
- `attachment` — таблица с дополнительной инфо-й к сообщению (фото, видео)
- `client_pet` — таблица питомцев клиентов
- `pet_type` — таблица для записи видов животных
- `pet_veterinarian` — промежуточная таблица для связи с таблиц `client_pet` и `veterinarian`
- `payment` — таблица с платежами клиентов
- `tariff` — таблица с тарифами
- `promo_code` — таблица с промо кодами
- `channel` — таблица для записи каналов регистрации
- `channel_client` — промежуточная таблица для связи с таблиц `client` и `channel`
- `business_partner` — таблица с партнерами
- `partner_client` — промежуточная таблица для связи с таблиц `client` и `business_partner`

**Связи**:
- `user` — `client`: один к одному
- `user` — `veterinarian`: один к одному
- `user` — `message`: один ко многим
- `message` — `attachment`: один ко многим
- `client` — `client_pet`: один ко многим
- `pet_type` — `client_pet`: один ко многим
- `client_pet` — `pet_veterinarian`: один ко многим
- `pet_veterinarian` — `veterinarian`: многие к одному
- `client` — `payment`: один ко многим
- `tariff` — `payment`: один ко многим
- `promo_code` — `payment`: один ко многим
- `client` — `partner_client`: один к одному
- `business_partner` — `partner_client`: один ко многим
- `client` — `channel_client`: один к одному
- `channel` — `channel_client`: один ко многим
